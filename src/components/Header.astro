<header id="header">
  <div class="logoPagina">
    <a href="/" class="logo-link">
      <img src="/logo.png" alt="Javierm.Dev" />
      <div class="logo-glow"></div>
    </a>
  </div>

  <nav id="main-nav">
    <ul>
      <li><a href="#about-me" class="nav-link"> Sobre mí</a></li>
      <li><a href="#experiencia" class="nav-link"> Experiencia</a></li>
      <li><a href="#proyectos" class="nav-link"> Proyectos</a></li>
      <li><a href="#skills" class="nav-link"> Skills</a></li>
      <li><a href="#contact" class="nav-link"> Contacto</a></li>
    </ul>
    <div class="nav-decoration"></div>
  </nav>
  <div id="header-buttons" class="header-buttons">
    <button id="theme-toggle" aria-label="Cambiar tema" title="Cambiar tema">
      <svg class="theme-icon theme-icon--light" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 3V1M12 23V21M4.22 4.22L2.81 2.81M21.19 21.19L19.78 19.78M1 12H3M21 12H23M4.22 19.78L2.81 21.19M21.19 2.81L19.78 4.22M16 12C16 14.21 14.21 16 12 16C9.79 16 8 14.21 8 12C8 9.79 9.79 8 12 8C14.21 8 16 9.79 16 12Z" 
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    
      <svg class="theme-icon theme-icon--dark" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M21 12.79C20.24 13.17 19.42 13.38 18.58 13.38C15.99 13.38 13.82 11.21 13.82 8.62C13.82 7.78 14.03 6.96 14.41 6.2C11.93 6.69 10 9.03 10 11.62C10 14.56 12.46 17.02 15.4 17.02C17.99 17.02 20.24 15.39 21 12.79Z" 
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <button id="menu-toggle" aria-label="Toggle menu" class="menu-btn">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="menu-icon">
        <path d="M3 12H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>
  
  
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
  const themeToggle = document.getElementById('theme-toggle'); // corregido el id
  if (!themeToggle) return; // seguridad por si no existe el botón

  const iconLight = themeToggle.querySelector('.theme-icon--light');
  const iconDark = themeToggle.querySelector('.theme-icon--dark');
  const body = document.body;

  // ---- Funciones auxiliares ----
  const setTheme = (mode) => {
    if (mode === 'claro') {
      body.classList.add('claro');
      iconLight.style.display = 'none';
      iconDark.style.display = 'block';
    } else {
      body.classList.remove('claro');
      iconLight.style.display = 'block';
      iconDark.style.display = 'none';
    }
    // Guardar cookie por 30 días
    document.cookie = `theme=${mode}; path=/; max-age=${60 * 60 * 24 * 30}`;
  };

  const getThemeFromCookie = () => {
    const match = document.cookie.match(/(?:^|;)\s*theme=([^;]+)/);
    return match ? match[1] : null;
  };

  // ---- Inicialización ----
  let theme = getThemeFromCookie();

  if (!theme) {
    // Si no hay cookie, se toma el tema del sistema
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    theme = prefersDark ? 'oscuro' : 'claro';
  }

  setTheme(theme);

  // ---- Evento toggle ----
  themeToggle.addEventListener('click', () => {
    const newTheme = body.classList.contains('claro') ? 'oscuro' : 'claro';
    setTheme(newTheme);
  });
});

</script>